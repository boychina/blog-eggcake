<!DOCTYPE html><html lang="zh-CN"><head><meta name="google-site-verification" content="ysl9po9N59vjLGroL70RxvgSCwmCa4y0Vf-bQ0dnnYg"/><meta name="baidu-site-verification" content="code-SQ8pinCY3n"/><meta name="sogou_site_verification" content="IbqK7EsWs0"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="64x64" href="/favicon/favicon-64x64.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta property="og:image" content="https://og-image.now.sh/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>React16.3+ 新的生命周期钩子 | 淡烘糕</title><meta property="og:image" content="/assets/blog/cover/2018-08-15-react-new-life-cycle-hook.jpg"/><meta name="description" itemProp="description" content="React16.3+ 新的生命周期钩子"/><meta name="keywords" itemProp="keywords" content="react,生命周期"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/ee5bd097db312828c0e8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ee5bd097db312828c0e8.css" data-n-g=""/><link rel="preload" href="/_next/static/css/5ef62f21f0b5e7e1e981.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5ef62f21f0b5e7e1e981.css" data-n-g=""/><link rel="preload" href="/_next/static/css/0e31bcd57375fb964f82.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0e31bcd57375fb964f82.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-01296f80a3a27a0d8764.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.d2ae4074d0a54d95f68e.js" as="script"/><link rel="preload" href="/_next/static/chunks/98eddfe4.a83a6a4548b93404854d.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9528123feb626448eb3f.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-d91e1313cce331845d2f.js" as="script"/><link rel="preload" href="/_next/static/chunks/29107295.0580e1df05c18e93d43c.js" as="script"/><link rel="preload" href="/_next/static/chunks/75fc9c18.2c4626c80ea818868077.js" as="script"/><link rel="preload" href="/_next/static/chunks/da33159f13f280faabb6c8887fc7d3e22b6456d5.87b9049651aaec8731ac.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-389bcf1b677fcdddc6c0.js" as="script"/></head><body><div id="__next"><div class="min-h-screen"><section class="w-screen bg-white flex-col md:flex-row flex items-center md:justify-between pt-3 pb-1 mb-6 md:mb-4 px-10 shadow-md md:fixed z-50"><a class="text-2xl md:text-xl font-bold tracking-tighter leading-tight md:pr-8 flex" href="/"><img src="/favicon/safari-pinned-tab.svg" class="w-6 mr-1"/>淡烘糕.</a><h4 class="text-center md:text-left text-sm mt-4 md:pl-8">不写博客的工程师不是好的搬砖工🧱</h4></section><main class="md:pt-20"><div class="container max-w-screen-xl mx-auto px-5 grid grid-cols-12 gap-2 md:gap-4 lg:gap-6 xl:gap-8"><div class="mb-5 col-span-12 md:col-span-10 lg:col-span-9 xl:col-span-8"><h1 class="text-2xl md:text-3xl lg:text-4xl font-bold tracking-tighter leading-tight md:leading-none mb-4 text-center md:text-left">React16.3+ 新的生命周期钩子</h1><div class="hidden md:block md:mb-12"><div class="flex items-center"><img src="/assets/blog/authors/zhaohuan.jpg" class="w-8 h-8 rounded-full mr-4" alt="淡烘糕"/><div class="text-sm text-cyan-600">淡烘糕</div><span class="ml-1 text-gray-500"><time dateTime="2018-08-15T12:00:00.322Z">2018-08-15</time></span></div></div><div class="mb-6 md:mb-8 sm:mx-0"><div class="sm:mx-0"><img src="/assets/blog/cover/2018-08-15-react-new-life-cycle-hook.jpg" alt="Cover Image for React16.3+ 新的生命周期钩子" class="h-64 rounded-xl mx-auto"/></div></div><div class="mx-auto"><div class="block md:hidden mb-6"><div class="flex items-center"><img src="/assets/blog/authors/zhaohuan.jpg" class="w-8 h-8 rounded-full mr-4" alt="淡烘糕"/><div class="text-sm text-cyan-600">淡烘糕</div><span class="ml-1 text-gray-500"><time dateTime="2018-08-15T12:00:00.322Z">2018-08-15</time></span></div></div></div><div class="markdown-body"><div class="PostBody_markdown___-zaK"><p>在 React 16.3 中，Facebook 的工程师们给 React 带了来一系列的新特性，如 suspense 和 time slicing 等，这些都为 React 接下来即将到来的异步渲染机制做准备，有兴趣的可以看<a href="https://link.juejin.im/?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Dv6iR3Zk4oDY">Sophie Alpert 在 JSConf Iceland 2018 的演讲</a>。</p>
<p>像 time slicing 等 React 内部优化特性，在 API 层面不会有太大变化，而 API 层面最大的变化应该在生命周期钩子。</p>
<p>React 的生命周期 API 一直以来十分稳定，但是当 React 团队在引入异步渲染机制的时候，发现之前的生命周期在使用时会产生一些问题，所以才会改动生命周期 API，感兴趣可以看<a href="https://link.juejin.im/?target=https%3A%2F%2Freactjs.org%2Fblog%2F2018%2F03%2F27%2Fupdate-on-async-rendering.html%23initializing-state">这篇博客</a>。</p>
<p>在 React 16.3 中，为下面三个生命周期钩子加上了 UNSAFE 标记：</p>
<ul>
<li>UNSAFE_componentWillMount</li>
<li>UNSAFE_componentWillReceiveProps</li>
<li>UNSAFE_componentWillUpdate</li>
</ul>
<p>新增下面两个生命周期方法</p>
<ul>
<li>static getDerivedStateFromProps // 从道具中获得派生状态</li>
<li>getSnapshotBeforeUpdate // 获取快照更新之前</li>
</ul>
<p>在目前 16.X（X &gt; 3）的 React 中，使用 componentWillMount, componentWillReceiveProps, componentWillUpdate 这三个方法会收到警告。<strong>React 团队计划在 17.0 中彻底废弃掉这几个 API</strong>。</p>
<h3>新的生命周期钩子：static getDerivedStateFromProps</h3>
<pre class="hljs"><code><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-title">getDerivedStateFromProps</span>(<span class="hljs-params">props, state</span>)</span> {
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<p>React 在实例化组件之后以及重新渲染组件之前，将调用新的 static getDerivedStateFromProps 生命周期方法。该方法类似于 componentWillReceiveProps，可以用来控制 props 更新 state 的过程。<strong>它返回一个对象表示新的 state。如果不需要更新组件，返回 null 即可</strong>。</p>
<p>geDerivedStateFromProps 与 componentDidUpdate 一起将会替换掉所有的 componentWillReceiveProps。</p>
<h3>新的生命周期钩子：getSnapshotBeforeUpadte</h3>
<pre class="hljs"><code><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-function"><span class="hljs-title">getSnapshotBeforeUpate</span>(<span class="hljs-params">prevProps, prevState</span>)</span> {
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<p>getSnapshotBeforeUpdate 方法 <strong>在 React 对视图做出实际改动（如 DOM 更新）发生前被调用，返回值将作为 ComponentDidUpdate 的第三个参数</strong>。</p>
<p>getSnapshotBeforeUpdate 配合 componentDidUpdate 可以取代 componentWillUpdate。</p>
<h3>为何移除 componentWillMount</h3>
<p>因为在 React 未来的版本中，异步渲染机制可能会导致单个组件实例可以多次调用该方法。很多开发者目前会将时间绑定、异步请求等写在 componentWillMount 中，一旦异步渲染 componentWillMount 被多次调用，将导致：</p>
<ul>
<li>进行重复的时间监听，无法正常取消重复的 Listener ，更有可能 <strong>导致内存泄漏</strong></li>
<li>发出重复的异步网络请求， <strong>导致 IO 资源被浪费</strong></li>
<li>在服务端渲染时，componentWillMount 会被调用，但是会因忽略异步获取的数据而浪费 IO 资源</li>
</ul>
<p>现在，React 推荐将原本在 componentWillMount 中的网络请求移到 componentDidMount 中。至于这样会不会导致请求被延迟发出影响用户体验，React 团队是这么解释的：</p>
<blockquote>
<p>There is a common misconception that fetching in componentWillMount lets you avoid the first empty rendering state. In practice this was never true because React has always executed render immediately after componentWillMount. If the data is not available by the time componentWillMount fires, the first render will still show a loading state regardless of where you initiate the fetch. This is why moving the fetch to componentDidMount has no perceptible effect in the vast majority of cases.</p>
</blockquote>
<blockquote>
<p>有一种常见的误解，认为在 componentWillMount 中请求可以避免第一个空呈现状态。在实践中，这从来都不是正确的，因为在组件挂起之后，React 总是立即执行。如果数据在组件挂起的时候没有可用，那么第一个渲染将仍然显示加载状态，而不管您发起请求的位置。这就是为什么在绝大多数情况下移动 fetch 到 componentDidMount 并没有明显的效果。</p>
</blockquote>
<p>componentWillMount、render 和 componentDidMount 方法虽然存在调用先后顺序，但在大多数情况下，几乎都是在很短的时间内先后执行完毕，几乎不会对用户体验产生影响。</p>
<h3>为什么移除 comonentWillUpdate</h3>
<p>大多数开发者使用 componentWillUpdate 的场景是配合 componentDidUpdate，分别获取 render 前后的视图状态，进行必要的处理。但随着 React 新的 suspense、time slicing、异步渲染等机制的到来，render 过程可以可以被分割成多次完成，还可以被暂停甚至回溯，这 <strong>导致 componentWillUpdate 和 componentDidUpdate 执行前后可能会间隔很长时间</strong>，足够使用户进行交互操作更改当前组件的状态，这样可能会导致难以追踪的 BUG。</p>
<p>React 新增的 getSnapshotBeforeUpdate 方法就是为了解决上述问题，因为 getSnapshotBeforeUpdate 方法是在 componentWillUpadate 后（如果存在的话），在 React 真正更改 DOM 前调用的，它获取到组件状态信息更可靠。</p>
<p>除此之外，getSnapshotBeforeUpdate 还有一个十分明显的好处：它调用的结果会作为第三个参数传入 componentDidUpdate，避免了 componentWillUpdate 和 componentDidUpdate 配合使用时将组件临时的状态数据存在组件实例上浪费内存，getSnapshotBeforeUpdate 返回的数据在 componentDidUpdate 中用完即被销毁，效率更高。</p>
<h3>总结</h3>
<p>React 进来 API 变化十分大，React 团队很长时间以来一直在实现异步渲染机制，目前的特性只是为异步渲染做准备，预计 React 在 17 版本发布时，性能会取的巨大的提升，期待中。。。</p>
<p>PS：从 Sophie Alpert 验证的两个 DEMO 上看，异步渲染的高效确实十分惊艳，有兴趣的可以看文章开头的演讲。</p>
</div></div><section class="flex justify-between flex-wrap my-8"><div style="margin-top:2px"><div class="whitespace-nowrap cursor-pointer flex items-center h-10 text-sm bg-black hover:bg-white hover:text-black border border-black text-white font-bold py-2 px-4 duration-200 transition-colors"><span role="img" aria-label="arrow-left" class="anticon anticon-arrow-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"></path></svg></span><span class="ml-2">Vue 服务端渲染</span></div></div><div style="margin-top:2px"><div class="whitespace-nowrap cursor-pointer flex items-center h-10 text-sm bg-black hover:bg-white hover:text-black border border-black text-white font-bold py-2 px-4 duration-200 transition-colors"><span class="mr-2">MySQL 常用命令</span><span role="img" aria-label="arrow-right" class="anticon anticon-arrow-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"></path></svg></span></div></div></section></div><div class="col-span-12 md:col-span-2 lg:col-span-3 xl:col-span-4"><div><div class="flex items-center" style="padding:12px 0"><span role="img" aria-label="send" class="anticon anticon-send"><svg viewBox="64 64 896 896" focusable="false" data-icon="send" width="1em" height="1em" fill="currentColor" aria-hidden="true"><defs><style></style></defs><path d="M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"></path></svg></span><span class="ml-1">标签</span></div><svg width="360" height="300"><g transform="translate(165, 150)"><text text-anchor="middle" fill="#c23531" transform="translate(36, -53)rotate(0)" style="font-size:20px"><a>体验</a></text><text text-anchor="middle" fill="#2f4554" transform="translate(104, -4)rotate(0)" style="font-size:20px"><a>响应式</a></text><text text-anchor="middle" fill="#61a0a8" transform="translate(116, -48)rotate(0)" style="font-size:20px"><a>自适应</a></text><text text-anchor="middle" fill="#d48265" transform="translate(24, -87)rotate(0)" style="font-size:20px"><a>Apple</a></text><text text-anchor="middle" fill="#91c7ae" transform="translate(48, 63)rotate(0)" style="font-size:20px"><a>数字</a></text><text text-anchor="middle" fill="#749f83" transform="translate(35, -111)rotate(0)" style="font-size:20px"><a>端到端</a></text><text text-anchor="middle" fill="#ca8622" transform="translate(-87, 63)rotate(90)" style="font-size:20px"><a>Unix</a></text><text text-anchor="middle" fill="#bda29a" transform="translate(72, 64)rotate(90)" style="font-size:20px"><a>Linux</a></text><text text-anchor="middle" fill="#6e7074" transform="translate(101, -26)rotate(0)" style="font-size:20px"><a>UI</a></text><text text-anchor="middle" fill="#546570" transform="translate(-69, -70)rotate(90)" style="font-size:20px"><a>CSS</a></text><text text-anchor="middle" fill="#c4ccd3" transform="translate(100, 35)rotate(90)" style="font-size:20px"><a>angular</a></text><text text-anchor="middle" fill="#c23531" transform="translate(-68, -7)rotate(0)" style="font-size:20px"><a>生活</a></text><text text-anchor="middle" fill="#2f4554" transform="translate(6, 91)rotate(90)" style="font-size:20px"><a>Node</a></text><text text-anchor="middle" fill="#61a0a8" transform="translate(-89, -40)rotate(90)" style="font-size:20px"><a>H5</a></text><text text-anchor="middle" fill="#d48265" transform="translate(-42, 85)rotate(0)" style="font-size:20px"><a>小程序</a></text><text text-anchor="middle" fill="#91c7ae" transform="translate(39, 105)rotate(90)" style="font-size:20px"><a>MySQL</a></text><text text-anchor="middle" fill="#749f83" transform="translate(104, -79)rotate(90)" style="font-size:20px"><a>ssr</a></text><text text-anchor="middle" fill="#ca8622" transform="translate(105, -105)rotate(0)" style="font-size:20px"><a>VScode</a></text><text text-anchor="middle" fill="#bda29a" transform="translate(-67, 26)rotate(0)" style="font-size:20px"><a>webpack</a></text><text text-anchor="middle" fill="#6e7074" transform="translate(-20, 63)rotate(0)" style="font-size:24px"><a>alibaba</a></text><text text-anchor="middle" fill="#546570" transform="translate(64, -61)rotate(90)" style="font-size:24px"><a>模块化</a></text><text text-anchor="middle" fill="#c4ccd3" transform="translate(30, -23)rotate(0)" style="font-size:26px"><a>前端</a></text><text text-anchor="middle" fill="#c23531" transform="translate(6, 41)rotate(0)" style="font-size:28px"><a>PWA</a></text><text text-anchor="middle" fill="#2f4554" transform="translate(44, 1)rotate(0)" style="font-size:28px"><a>vue</a></text><text text-anchor="middle" fill="#61a0a8" transform="translate(-49, -59)rotate(90)" style="font-size:32px"><a>react</a></text><text text-anchor="middle" fill="#d48265" transform="translate(-24, -70)rotate(90)" style="font-size:36px"><a>JavaScript</a></text></g></svg></div><div><div class="flex items-center" style="padding:12px 0"><span role="img" aria-label="send" class="anticon anticon-send"><svg viewBox="64 64 896 896" focusable="false" data-icon="send" width="1em" height="1em" fill="currentColor" aria-hidden="true"><defs><style></style></defs><path d="M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"></path></svg></span><span class="ml-1">博客日历</span></div><div style="width:330px;border:1px solid #f0f0f0;border-radius:2px"><div class="ant-picker-calendar ant-picker-calendar-mini"><div class="ant-picker-calendar-header"><div class="ant-select ant-select-sm ant-picker-calendar-year-select ant-select-single ant-select-show-arrow"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" style="opacity:0" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value="" readonly="" unselectable="on"/></span><span class="ant-select-selection-item" title="2021">2021</span></div><span class="ant-select-arrow" style="user-select:none;-webkit-user-select:none" unselectable="on" aria-hidden="true"><span role="img" aria-label="down" class="anticon anticon-down ant-select-suffix"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></span></div><div class="ant-select ant-select-sm ant-picker-calendar-month-select ant-select-single ant-select-show-arrow"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" style="opacity:0" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value="" readonly="" unselectable="on"/></span><span class="ant-select-selection-item" title="Jan">Jan</span></div><span class="ant-select-arrow" style="user-select:none;-webkit-user-select:none" unselectable="on" aria-hidden="true"><span role="img" aria-label="down" class="anticon anticon-down ant-select-suffix"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></span></div><div class="ant-radio-group ant-radio-group-outline ant-radio-group-small ant-picker-calendar-mode-switch"><label class="ant-radio-button-wrapper ant-radio-button-wrapper-checked"><span class="ant-radio-button ant-radio-button-checked"><input type="radio" class="ant-radio-button-input" checked="" value="month"/><span class="ant-radio-button-inner"></span></span><span>Month</span></label><label class="ant-radio-button-wrapper"><span class="ant-radio-button"><input type="radio" class="ant-radio-button-input" value="year"/><span class="ant-radio-button-inner"></span></span><span>Year</span></label></div></div><div tabindex="0" class="ant-picker-panel"><div class="ant-picker-date-panel"><div class="ant-picker-body"><table class="ant-picker-content"><thead><tr><th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th></tr></thead><tbody><tr><td title="2020-12-27" class="ant-picker-cell"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">27</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2020-12-28" class="ant-picker-cell"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">28</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2020-12-29" class="ant-picker-cell"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">29</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2020-12-30" class="ant-picker-cell"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">30</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2020-12-31" class="ant-picker-cell ant-picker-cell-end"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">31</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-01" class="ant-picker-cell ant-picker-cell-start ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">01</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-02" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">02</div><div class="ant-picker-calendar-date-content"></div></div></td></tr><tr><td title="2021-01-03" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">03</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-04" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">04</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-05" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">05</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-06" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">06</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-07" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">07</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-08" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">08</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-09" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">09</div><div class="ant-picker-calendar-date-content"></div></div></td></tr><tr><td title="2021-01-10" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">10</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-11" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">11</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-12" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">12</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-13" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">13</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-14" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">14</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-15" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">15</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-16" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">16</div><div class="ant-picker-calendar-date-content"></div></div></td></tr><tr><td title="2021-01-17" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">17</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-18" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">18</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-19" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">19</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-20" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">20</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-21" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">21</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-22" class="ant-picker-cell ant-picker-cell-in-view ant-picker-cell-today ant-picker-cell-selected"><div class="ant-picker-cell-inner ant-picker-calendar-date ant-picker-calendar-date-today"><div class="ant-picker-calendar-date-value">22</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-23" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">23</div><div class="ant-picker-calendar-date-content"></div></div></td></tr><tr><td title="2021-01-24" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">24</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-25" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">25</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-26" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">26</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-27" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">27</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-28" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">28</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-29" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">29</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-01-30" class="ant-picker-cell ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">30</div><div class="ant-picker-calendar-date-content"></div></div></td></tr><tr><td title="2021-01-31" class="ant-picker-cell ant-picker-cell-end ant-picker-cell-in-view"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">31</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-02-01" class="ant-picker-cell ant-picker-cell-start"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">01</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-02-02" class="ant-picker-cell"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">02</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-02-03" class="ant-picker-cell"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">03</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-02-04" class="ant-picker-cell"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">04</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-02-05" class="ant-picker-cell"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">05</div><div class="ant-picker-calendar-date-content"></div></div></td><td title="2021-02-06" class="ant-picker-cell"><div class="ant-picker-cell-inner ant-picker-calendar-date"><div class="ant-picker-calendar-date-value">06</div><div class="ant-picker-calendar-date-content"></div></div></td></tr></tbody></table></div></div></div></div></div></div><div class="WidgetItem_widgetItem__xRRGd"><div class="ant-list ant-list-sm ant-list-split"><div class="ant-list-header"><div class="flex items-center"><span role="img" aria-label="send" class="anticon anticon-send"><svg viewBox="64 64 896 896" focusable="false" data-icon="send" width="1em" height="1em" fill="currentColor" aria-hidden="true"><defs><style></style></defs><path d="M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"></path></svg></span><span class="ml-1">最近更新</span></div></div><div class="ant-spin-nested-loading"><div class="ant-spin-container"><ul class="ant-list-items"><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2020-12-21-vue3-core-source-code-1">Vue3.0核心源码解读| 组件渲染：vnode 到真实 DOM 是如何转变的？</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2020-12-21T23:00:00.322Z">2020-12-22</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2020-12-19-vue3-core-source-code-0">Vue3.0核心源码解读| 一文看懂Vue3.0的优化</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2020-12-19T14:00:00.322Z">2020-12-19</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2020-12-17-webpack5-build-react-dev-env">Webpack5搭建React开发环境</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2020-12-17T18:00:00.322Z">2020-12-18</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2020-10-06-react17-coming">React 17来了</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2020-10-06T12:00:00.322Z">2020-10-06</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2020-09-27-react-grid-layout">React-grid-layout 一个支持拖拽的栅格布局库</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2020-09-27T12:00:00.322Z">2020-09-27</time></div></li></ul></div></div></div></div><div class="WidgetItem_widgetItem__xRRGd"><div class="ant-list ant-list-sm ant-list-split"><div class="ant-list-header"><div class="flex items-center"><span role="img" aria-label="send" class="anticon anticon-send"><svg viewBox="64 64 896 896" focusable="false" data-icon="send" width="1em" height="1em" fill="currentColor" aria-hidden="true"><defs><style></style></defs><path d="M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"></path></svg></span><span class="ml-1">更多</span></div></div><div class="ant-spin-nested-loading"><div class="ant-spin-container"><ul class="ant-list-items"><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2020-09-20-ECMAScript2020">ECMAScript2020新特性总结及使用场景</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2020-09-20T12:00:00.322Z">2020-09-20</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2020-08-22-ECMAScript2019">ECMAScript2019新特性总结及使用场景</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2020-08-22T12:00:00.322Z">2020-08-22</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2020-08-12-ECMAScript2018">ECMAScript2018新特性总结及使用场景</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2020-08-12T12:00:00.322Z">2020-08-12</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2020-08-01-vscode-code-annotation-keyword-analysis">VScode代码注释关键字解析</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2020-08-01T12:00:00.322Z">2020-08-01</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2020-07-18-ECMAScript2017">ECMAScript2017新特性总结及使用场景</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2020-07-18T12:00:00.322Z">2020-07-18</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2020-07-11-ECMAScript2016">ECMAScript2016新特性总结及使用场景</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2020-07-11T12:00:00.322Z">2020-07-11</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2019-12-18-immutable-react">Immutable 详解及 React 中实践</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2019-12-18T12:00:00.322Z">2019-12-18</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2019-10-24-JavaScript-prototype">JavsScript 原型</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2019-10-24T12:00:00.322Z">2019-10-24</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2019-10-23-setState-sync-or-async">setState 是同步还是异步的呢？</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2019-10-23T12:00:00.322Z">2019-10-23</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2019-09-22-javascript-this-pointer">JavaScript this 对象查找</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2019-09-22T12:00:00.322Z">2019-09-22</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2018-12-12-commonly-used-regular-expressionsm">一些常用的正则表达式</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2018-12-12T12:00:00.322Z">2018-12-12</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2018-12-12-downloading-frontend-data-stream-files">前端数据流文件下载三种方式</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2018-12-12T12:00:00.322Z">2018-12-12</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2018-08-15-react-new-life-cycle-hook">React16.3+ 新的生命周期钩子</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2018-08-15T12:00:00.322Z">2018-08-15</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2018-08-15-vue-server-side-render">Vue 服务端渲染</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2018-08-15T12:00:00.322Z">2018-08-15</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2018-08-09-mysql-common-commands">MySQL 常用命令</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2018-08-09T12:00:00.322Z">2018-08-09</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2018-08-07-vue-and-wechat-small-program-differences">Vue 和微信小程序的区别、比较</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2018-08-07T12:00:00.322Z">2018-08-07</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2018-08-06-common-problems-and-matters-needing-attention-on-h5-mobile-terminal">H5移动端常见问题及注意事项</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2018-08-06T12:00:00.322Z">2018-08-06</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2018-08-04-Proxy-and-Reflect-of-ES6">ES6 的 Proxy 和 Reflect</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2018-08-04T12:00:00.322Z">2018-08-04</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2018-08-02-make-the-cli-with-node">如何用 Node 来制作 CLI</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2018-08-02T12:00:00.322Z">2018-08-02</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2018-07-31-about-life-and-survival">关于生活与生存</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2018-07-31T05:35:07.322Z">2018-07-31</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2017-07-12-upgrading-eleme-to-pwa">饿了么的 PWA 升级实践</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2017-07-12T12:00:00.322Z">2017-07-12</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2017-02-09-nextgen-web-pwa">下一代 Web 应用模型 —— Progressive Web App</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2017-02-09T12:00:00.322Z">2017-02-09</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2016-10-20-pwa-qcon2016">Progressive Web Apps，复兴序章「QCon 上海 2016」</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2016-10-20T12:00:00.322Z">2016-10-20</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2016-06-05-pwa-in-my-pov">Progressive Web App 之我见</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2016-06-05T12:00:00.322Z">2016-06-05</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2016-02-01-React-vs-Angular2">React vs Angular 2：冰与火之歌「译」</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2016-02-01T12:00:00.322Z">2016-02-01</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2015-12-28-css-sucks-2015">都2015年了，CSS怎么还是这么糟糕</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2015-12-28T12:00:00.322Z">2015-12-28</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2015-12-15-ios9-safari-web">iOS 9，为前端世界都带来了些什么？「译」</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2015-12-15T12:00:00.322Z">2015-12-15</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2015-10-28-how-designer-learn-fe">设计师如何学习前端？</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2015-10-28T12:00:00.322Z">2015-10-28</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2015-09-22-js-version">ES5, ES6, ES2016, ES.Next: JavaScript 的版本是怎么回事？「译」</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2015-09-22T12:00:00.322Z">2015-09-22</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2015-07-09-js-module-7day">JavaScript 模块化七日谈</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2015-07-09T12:00:00.322Z">2015-07-09</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2015-06-15-alitrip-strategy">聊聊「阿里旅行 · 去啊」—— 行业与战略</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2015-06-15T12:00:00.322Z">2015-06-15</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2015-05-25-js-module-loader">JavaScript模块化加载</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2015-05-25T12:00:00.322Z">2015-05-25</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2015-04-15-os-metro">操作系统的浪漫主义 —— Metro 篇</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2015-04-15T12:00:00.322Z">2015-04-15</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2015-04-14-unix-linux-note">Unix/Linux 扫盲笔记</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2015-04-14T12:00:00.322Z">2015-04-14</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2015-03-31-e2e_user_scenarios">端到端用户场景的定义</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2015-03-31T12:00:00.322Z">2015-03-31</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2015-03-25-digital-native">Digital native 数字原住民</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2015-03-25T12:00:00.322Z">2015-03-25</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2015-03-10-apple-event-2015">如何评价2015年3月9日Apple春季发布会</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2015-03-10T12:00:00.322Z">2015-03-10</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2014-11-20-responsive-web-design">你们觉得响应式好呢，还是手机和PC端分开来写？</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2014-11-20T12:00:00.322Z">2014-11-20</time></div></li><li style="padding:8px 4px" class="ant-list-item flex-wrap"><div class="block truncate"><a href="/posts/2014-10-01-why-alibaba-ux-sucks">为什么阿里系软件体验都不好？</a></div><div class="text-gray-500 w-full text-right">--<time dateTime="2014-10-01T12:00:00.322Z">2014-10-01</time></div></li></ul></div></div></div></div></div></div></main><div class="ant-back-top"></div></div><footer class="bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"><div class="pt-10 flex flex-col items-center"><div class="flex flex-col lg:flex-row justify-center items-center"><a href="https://github.com/vercel/next.js/tree/canary/examples/blog-starter" class="text-sm mx-3 hover:underline"><div class="flex items-center"><span role="img" aria-label="github" class="anticon anticon-github mr-1"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></span> GitHub</div></a><span>©2020-<!-- -->2021<!-- --> 淡烘糕</span></div></div><div class="text-sm mt-2 pb-8 text-gray-500 flex justify-center"><a href="http://beian.miit.gov.cn" target="_blank">ICP备案号：蜀ICP备2020034346号-1</a><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=51010802001016" class="ml-2 flex"><img src="/assets/备案图标.png" class="w-4 h-4"/>川公网安备 51010802001016号</a></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"allPosts":[{"title":"Vue3.0核心源码解读| 组件渲染：vnode 到真实 DOM 是如何转变的？","date":"2020-12-21T23:00:00.322Z","slug":"2020-12-21-vue3-core-source-code-1","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"Vue3.0核心源码解读| 一文看懂Vue3.0的优化","date":"2020-12-19T14:00:00.322Z","slug":"2020-12-19-vue3-core-source-code-0","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"Webpack5搭建React开发环境","date":"2020-12-17T18:00:00.322Z","slug":"2020-12-17-webpack5-build-react-dev-env","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"React 17来了","date":"2020-10-06T12:00:00.322Z","slug":"2020-10-06-react17-coming","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"React-grid-layout 一个支持拖拽的栅格布局库","date":"2020-09-27T12:00:00.322Z","slug":"2020-09-27-react-grid-layout","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"ECMAScript2020新特性总结及使用场景","date":"2020-09-20T12:00:00.322Z","slug":"2020-09-20-ECMAScript2020","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"ECMAScript2019新特性总结及使用场景","date":"2020-08-22T12:00:00.322Z","slug":"2020-08-22-ECMAScript2019","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"ECMAScript2018新特性总结及使用场景","date":"2020-08-12T12:00:00.322Z","slug":"2020-08-12-ECMAScript2018","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"VScode代码注释关键字解析","date":"2020-08-01T12:00:00.322Z","slug":"2020-08-01-vscode-code-annotation-keyword-analysis","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"ECMAScript2017新特性总结及使用场景","date":"2020-07-18T12:00:00.322Z","slug":"2020-07-18-ECMAScript2017","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"ECMAScript2016新特性总结及使用场景","date":"2020-07-11T12:00:00.322Z","slug":"2020-07-11-ECMAScript2016","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"Immutable 详解及 React 中实践","date":"2019-12-18T12:00:00.322Z","slug":"2019-12-18-immutable-react","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"JavsScript 原型","date":"2019-10-24T12:00:00.322Z","slug":"2019-10-24-JavaScript-prototype","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"setState 是同步还是异步的呢？","date":"2019-10-23T12:00:00.322Z","slug":"2019-10-23-setState-sync-or-async","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"JavaScript this 对象查找","date":"2019-09-22T12:00:00.322Z","slug":"2019-09-22-javascript-this-pointer","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"一些常用的正则表达式","date":"2018-12-12T12:00:00.322Z","slug":"2018-12-12-commonly-used-regular-expressionsm","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"前端数据流文件下载三种方式","date":"2018-12-12T12:00:00.322Z","slug":"2018-12-12-downloading-frontend-data-stream-files","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"React16.3+ 新的生命周期钩子","date":"2018-08-15T12:00:00.322Z","slug":"2018-08-15-react-new-life-cycle-hook","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"Vue 服务端渲染","date":"2018-08-15T12:00:00.322Z","slug":"2018-08-15-vue-server-side-render","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"MySQL 常用命令","date":"2018-08-09T12:00:00.322Z","slug":"2018-08-09-mysql-common-commands","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"Vue 和微信小程序的区别、比较","date":"2018-08-07T12:00:00.322Z","slug":"2018-08-07-vue-and-wechat-small-program-differences","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"H5移动端常见问题及注意事项","date":"2018-08-06T12:00:00.322Z","slug":"2018-08-06-common-problems-and-matters-needing-attention-on-h5-mobile-terminal","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"ES6 的 Proxy 和 Reflect","date":"2018-08-04T12:00:00.322Z","slug":"2018-08-04-Proxy-and-Reflect-of-ES6","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"如何用 Node 来制作 CLI","date":"2018-08-02T12:00:00.322Z","slug":"2018-08-02-make-the-cli-with-node","author":{"name":"Hux","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"关于生活与生存","date":"2018-07-31T05:35:07.322Z","slug":"2018-07-31-about-life-and-survival","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"}},{"title":"饿了么的 PWA 升级实践","date":"2017-07-12T12:00:00.322Z","slug":"2017-07-12-upgrading-eleme-to-pwa","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"下一代 Web 应用模型 —— Progressive Web App","date":"2017-02-09T12:00:00.322Z","slug":"2017-02-09-nextgen-web-pwa","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"Progressive Web Apps，复兴序章「QCon 上海 2016」","date":"2016-10-20T12:00:00.322Z","slug":"2016-10-20-pwa-qcon2016","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"Progressive Web App 之我见","date":"2016-06-05T12:00:00.322Z","slug":"2016-06-05-pwa-in-my-pov","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"React vs Angular 2：冰与火之歌「译」","date":"2016-02-01T12:00:00.322Z","slug":"2016-02-01-React-vs-Angular2","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"都2015年了，CSS怎么还是这么糟糕","date":"2015-12-28T12:00:00.322Z","slug":"2015-12-28-css-sucks-2015","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"iOS 9，为前端世界都带来了些什么？「译」","date":"2015-12-15T12:00:00.322Z","slug":"2015-12-15-ios9-safari-web","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"设计师如何学习前端？","date":"2015-10-28T12:00:00.322Z","slug":"2015-10-28-how-designer-learn-fe","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"ES5, ES6, ES2016, ES.Next: JavaScript 的版本是怎么回事？「译」","date":"2015-09-22T12:00:00.322Z","slug":"2015-09-22-js-version","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"JavaScript 模块化七日谈","date":"2015-07-09T12:00:00.322Z","slug":"2015-07-09-js-module-7day","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"聊聊「阿里旅行 · 去啊」—— 行业与战略","date":"2015-06-15T12:00:00.322Z","slug":"2015-06-15-alitrip-strategy","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"JavaScript模块化加载","date":"2015-05-25T12:00:00.322Z","slug":"2015-05-25-js-module-loader","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"操作系统的浪漫主义 —— Metro 篇","date":"2015-04-15T12:00:00.322Z","slug":"2015-04-15-os-metro","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"Unix/Linux 扫盲笔记","date":"2015-04-14T12:00:00.322Z","slug":"2015-04-14-unix-linux-note","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"端到端用户场景的定义","date":"2015-03-31T12:00:00.322Z","slug":"2015-03-31-e2e_user_scenarios","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"Digital native 数字原住民","date":"2015-03-25T12:00:00.322Z","slug":"2015-03-25-digital-native","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"如何评价2015年3月9日Apple春季发布会","date":"2015-03-10T12:00:00.322Z","slug":"2015-03-10-apple-event-2015","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"你们觉得响应式好呢，还是手机和PC端分开来写？","date":"2014-11-20T12:00:00.322Z","slug":"2014-11-20-responsive-web-design","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}},{"title":"为什么阿里系软件体验都不好？","date":"2014-10-01T12:00:00.322Z","slug":"2014-10-01-why-alibaba-ux-sucks","author":{"name":"Hux","picture":"/assets/blog/authors/hux.jpg"}}],"prevNextPost":{"prevPost":{"title":"MySQL 常用命令","slug":"2018-08-09-mysql-common-commands"},"nextPost":{"title":"Vue 服务端渲染","slug":"2018-08-15-vue-server-side-render"}},"post":{"title":"React16.3+ 新的生命周期钩子","description":"React16.3+ 新的生命周期钩子","keyword":"react,生命周期","date":"2018-08-15T12:00:00.322Z","slug":"2018-08-15-react-new-life-cycle-hook","author":{"name":"淡烘糕","picture":"/assets/blog/authors/zhaohuan.jpg"},"content":"\u003cp\u003e在 React 16.3 中，Facebook 的工程师们给 React 带了来一系列的新特性，如 suspense 和 time slicing 等，这些都为 React 接下来即将到来的异步渲染机制做准备，有兴趣的可以看\u003ca href=\"https://link.juejin.im/?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Dv6iR3Zk4oDY\"\u003eSophie Alpert 在 JSConf Iceland 2018 的演讲\u003c/a\u003e。\u003c/p\u003e\n\u003cp\u003e像 time slicing 等 React 内部优化特性，在 API 层面不会有太大变化，而 API 层面最大的变化应该在生命周期钩子。\u003c/p\u003e\n\u003cp\u003eReact 的生命周期 API 一直以来十分稳定，但是当 React 团队在引入异步渲染机制的时候，发现之前的生命周期在使用时会产生一些问题，所以才会改动生命周期 API，感兴趣可以看\u003ca href=\"https://link.juejin.im/?target=https%3A%2F%2Freactjs.org%2Fblog%2F2018%2F03%2F27%2Fupdate-on-async-rendering.html%23initializing-state\"\u003e这篇博客\u003c/a\u003e。\u003c/p\u003e\n\u003cp\u003e在 React 16.3 中，为下面三个生命周期钩子加上了 UNSAFE 标记：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUNSAFE_componentWillMount\u003c/li\u003e\n\u003cli\u003eUNSAFE_componentWillReceiveProps\u003c/li\u003e\n\u003cli\u003eUNSAFE_componentWillUpdate\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e新增下面两个生命周期方法\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003estatic getDerivedStateFromProps // 从道具中获得派生状态\u003c/li\u003e\n\u003cli\u003egetSnapshotBeforeUpdate // 获取快照更新之前\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e在目前 16.X（X \u0026gt; 3）的 React 中，使用 componentWillMount, componentWillReceiveProps, componentWillUpdate 这三个方法会收到警告。\u003cstrong\u003eReact 团队计划在 17.0 中彻底废弃掉这几个 API\u003c/strong\u003e。\u003c/p\u003e\n\u003ch3\u003e新的生命周期钩子：static getDerivedStateFromProps\u003c/h3\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eExample\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eComponent\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003egetDerivedStateFromProps\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eprops, state\u003c/span\u003e)\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eReact 在实例化组件之后以及重新渲染组件之前，将调用新的 static getDerivedStateFromProps 生命周期方法。该方法类似于 componentWillReceiveProps，可以用来控制 props 更新 state 的过程。\u003cstrong\u003e它返回一个对象表示新的 state。如果不需要更新组件，返回 null 即可\u003c/strong\u003e。\u003c/p\u003e\n\u003cp\u003egeDerivedStateFromProps 与 componentDidUpdate 一起将会替换掉所有的 componentWillReceiveProps。\u003c/p\u003e\n\u003ch3\u003e新的生命周期钩子：getSnapshotBeforeUpadte\u003c/h3\u003e\n\u003cpre class=\"hljs\"\u003e\u003ccode\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eExample\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eComponent\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003egetSnapshotBeforeUpate\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eprevProps, prevState\u003c/span\u003e)\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003egetSnapshotBeforeUpdate 方法 \u003cstrong\u003e在 React 对视图做出实际改动（如 DOM 更新）发生前被调用，返回值将作为 ComponentDidUpdate 的第三个参数\u003c/strong\u003e。\u003c/p\u003e\n\u003cp\u003egetSnapshotBeforeUpdate 配合 componentDidUpdate 可以取代 componentWillUpdate。\u003c/p\u003e\n\u003ch3\u003e为何移除 componentWillMount\u003c/h3\u003e\n\u003cp\u003e因为在 React 未来的版本中，异步渲染机制可能会导致单个组件实例可以多次调用该方法。很多开发者目前会将时间绑定、异步请求等写在 componentWillMount 中，一旦异步渲染 componentWillMount 被多次调用，将导致：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e进行重复的时间监听，无法正常取消重复的 Listener ，更有可能 \u003cstrong\u003e导致内存泄漏\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e发出重复的异步网络请求， \u003cstrong\u003e导致 IO 资源被浪费\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e在服务端渲染时，componentWillMount 会被调用，但是会因忽略异步获取的数据而浪费 IO 资源\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e现在，React 推荐将原本在 componentWillMount 中的网络请求移到 componentDidMount 中。至于这样会不会导致请求被延迟发出影响用户体验，React 团队是这么解释的：\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThere is a common misconception that fetching in componentWillMount lets you avoid the first empty rendering state. In practice this was never true because React has always executed render immediately after componentWillMount. If the data is not available by the time componentWillMount fires, the first render will still show a loading state regardless of where you initiate the fetch. This is why moving the fetch to componentDidMount has no perceptible effect in the vast majority of cases.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003e有一种常见的误解，认为在 componentWillMount 中请求可以避免第一个空呈现状态。在实践中，这从来都不是正确的，因为在组件挂起之后，React 总是立即执行。如果数据在组件挂起的时候没有可用，那么第一个渲染将仍然显示加载状态，而不管您发起请求的位置。这就是为什么在绝大多数情况下移动 fetch 到 componentDidMount 并没有明显的效果。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003ecomponentWillMount、render 和 componentDidMount 方法虽然存在调用先后顺序，但在大多数情况下，几乎都是在很短的时间内先后执行完毕，几乎不会对用户体验产生影响。\u003c/p\u003e\n\u003ch3\u003e为什么移除 comonentWillUpdate\u003c/h3\u003e\n\u003cp\u003e大多数开发者使用 componentWillUpdate 的场景是配合 componentDidUpdate，分别获取 render 前后的视图状态，进行必要的处理。但随着 React 新的 suspense、time slicing、异步渲染等机制的到来，render 过程可以可以被分割成多次完成，还可以被暂停甚至回溯，这 \u003cstrong\u003e导致 componentWillUpdate 和 componentDidUpdate 执行前后可能会间隔很长时间\u003c/strong\u003e，足够使用户进行交互操作更改当前组件的状态，这样可能会导致难以追踪的 BUG。\u003c/p\u003e\n\u003cp\u003eReact 新增的 getSnapshotBeforeUpdate 方法就是为了解决上述问题，因为 getSnapshotBeforeUpdate 方法是在 componentWillUpadate 后（如果存在的话），在 React 真正更改 DOM 前调用的，它获取到组件状态信息更可靠。\u003c/p\u003e\n\u003cp\u003e除此之外，getSnapshotBeforeUpdate 还有一个十分明显的好处：它调用的结果会作为第三个参数传入 componentDidUpdate，避免了 componentWillUpdate 和 componentDidUpdate 配合使用时将组件临时的状态数据存在组件实例上浪费内存，getSnapshotBeforeUpdate 返回的数据在 componentDidUpdate 中用完即被销毁，效率更高。\u003c/p\u003e\n\u003ch3\u003e总结\u003c/h3\u003e\n\u003cp\u003eReact 进来 API 变化十分大，React 团队很长时间以来一直在实现异步渲染机制，目前的特性只是为异步渲染做准备，预计 React 在 17 版本发布时，性能会取的巨大的提升，期待中。。。\u003c/p\u003e\n\u003cp\u003ePS：从 Sophie Alpert 验证的两个 DEMO 上看，异步渲染的高效确实十分惊艳，有兴趣的可以看文章开头的演讲。\u003c/p\u003e\n","ogImage":{"url":"/assets/blog/cover/2018-08-15-react-new-life-cycle-hook.jpg"},"coverImage":"/assets/blog/cover/2018-08-15-react-new-life-cycle-hook.jpg"},"tags":{"alibaba":{"value":2,"posts":[{"tag":"alibaba,体验","slug":"2014-10-01-why-alibaba-ux-sucks"},{"tag":"alibaba","slug":"2015-06-15-alitrip-strategy"}]},"体验":{"value":1,"posts":[{"tag":"alibaba,体验","slug":"2014-10-01-why-alibaba-ux-sucks"}]},"响应式":{"value":1,"posts":[{"tag":"响应式,自适应","slug":"2014-11-20-responsive-web-design"}]},"自适应":{"value":1,"posts":[{"tag":"响应式,自适应","slug":"2014-11-20-responsive-web-design"}]},"Apple":{"value":1,"posts":[{"tag":"Apple","slug":"2015-03-10-apple-event-2015"}]},"数字":{"value":1,"posts":[{"tag":"数字","slug":"2015-03-25-digital-native"}]},"端到端":{"value":1,"posts":[{"tag":"端到端","slug":"2015-03-31-e2e_user_scenarios"}]},"Unix":{"value":1,"posts":[{"tag":"Unix,Linux","slug":"2015-04-14-unix-linux-note"}]},"Linux":{"value":1,"posts":[{"tag":"Unix,Linux","slug":"2015-04-14-unix-linux-note"}]},"UI":{"value":1,"posts":[{"tag":"UI","slug":"2015-04-15-os-metro"}]},"JavaScript":{"value":13,"posts":[{"tag":"JavaScript,模块化","slug":"2015-05-25-js-module-loader"},{"tag":"JavaScript,模块化","slug":"2015-07-09-js-module-7day"},{"tag":"JavaScript","slug":"2015-09-22-js-version"},{"tag":"前端,JavaScript","slug":"2015-12-15-ios9-safari-web"},{"tag":"JavaScript","slug":"2018-08-04-Proxy-and-Reflect-of-ES6"},{"tag":"JavaScript","slug":"2018-12-12-commonly-used-regular-expressionsm"},{"tag":"JavaScript","slug":"2019-09-22-javascript-this-pointer"},{"tag":"JavaScript","slug":"2019-10-24-JavaScript-prototype"},{"tag":"JavaScript","slug":"2020-07-11-ECMAScript2016"},{"tag":"JavaScript","slug":"2020-07-18-ECMAScript2017"},{"tag":"JavaScript","slug":"2020-08-12-ECMAScript2018"},{"tag":"JavaScript","slug":"2020-08-22-ECMAScript2019"},{"tag":"JavaScript","slug":"2020-09-20-ECMAScript2020"}]},"模块化":{"value":2,"posts":[{"tag":"JavaScript,模块化","slug":"2015-05-25-js-module-loader"},{"tag":"JavaScript,模块化","slug":"2015-07-09-js-module-7day"}]},"前端":{"value":3,"posts":[{"tag":"前端","slug":"2015-10-28-how-designer-learn-fe"},{"tag":"前端,JavaScript","slug":"2015-12-15-ios9-safari-web"},{"tag":"前端","slug":"2018-12-12-downloading-frontend-data-stream-files"}]},"CSS":{"value":1,"posts":[{"tag":"CSS","slug":"2015-12-28-css-sucks-2015"}]},"react":{"value":7,"posts":[{"tag":"react,angular","slug":"2016-02-01-React-vs-Angular2"},{"tag":"react","slug":"2018-08-15-react-new-life-cycle-hook"},{"tag":"react","slug":"2019-10-23-setState-sync-or-async"},{"tag":"react","slug":"2019-12-18-immutable-react"},{"tag":"react","slug":"2020-09-27-react-grid-layout"},{"tag":"react","slug":"2020-10-06-react17-coming"},{"tag":"webpack,react","slug":"2020-12-17-webpack5-build-react-dev-env"}]},"angular":{"value":1,"posts":[{"tag":"react,angular","slug":"2016-02-01-React-vs-Angular2"}]},"PWA":{"value":4,"posts":[{"tag":"PWA","slug":"2016-06-05-pwa-in-my-pov"},{"tag":"PWA","slug":"2016-10-20-pwa-qcon2016"},{"tag":"PWA","slug":"2017-02-09-nextgen-web-pwa"},{"tag":"PWA","slug":"2017-07-12-upgrading-eleme-to-pwa"}]},"生活":{"value":1,"posts":[{"tag":"生活","slug":"2018-07-31-about-life-and-survival"}]},"Node":{"value":1,"posts":[{"tag":"Node","slug":"2018-08-02-make-the-cli-with-node"}]},"H5":{"value":1,"posts":[{"tag":"H5","slug":"2018-08-06-common-problems-and-matters-needing-attention-on-h5-mobile-terminal"}]},"vue":{"value":4,"posts":[{"tag":"vue,小程序","slug":"2018-08-07-vue-and-wechat-small-program-differences"},{"tag":"vue,ssr","slug":"2018-08-15-vue-server-side-render"},{"tag":"vue","slug":"2020-12-19-vue3-core-source-code-0"},{"tag":"vue","slug":"2020-12-21-vue3-core-source-code-1"}]},"小程序":{"value":1,"posts":[{"tag":"vue,小程序","slug":"2018-08-07-vue-and-wechat-small-program-differences"}]},"MySQL":{"value":1,"posts":[{"tag":"MySQL","slug":"2018-08-09-mysql-common-commands"}]},"ssr":{"value":1,"posts":[{"tag":"vue,ssr","slug":"2018-08-15-vue-server-side-render"}]},"VScode":{"value":1,"posts":[{"tag":"VScode","slug":"2020-08-01-vscode-code-annotation-keyword-analysis"}]},"webpack":{"value":1,"posts":[{"tag":"webpack,react","slug":"2020-12-17-webpack5-build-react-dev-env"}]}}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"2018-08-15-react-new-life-cycle-hook"},"buildId":"_sRFYeniNLI_tQwcwB1Cj","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-28a453ab78bd7ac4fdb9.js"></script><script src="/_next/static/chunks/main-01296f80a3a27a0d8764.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.d2ae4074d0a54d95f68e.js" async=""></script><script src="/_next/static/chunks/98eddfe4.a83a6a4548b93404854d.js" async=""></script><script src="/_next/static/chunks/commons.9528123feb626448eb3f.js" async=""></script><script src="/_next/static/chunks/pages/_app-d91e1313cce331845d2f.js" async=""></script><script src="/_next/static/chunks/29107295.0580e1df05c18e93d43c.js" async=""></script><script src="/_next/static/chunks/75fc9c18.2c4626c80ea818868077.js" async=""></script><script src="/_next/static/chunks/da33159f13f280faabb6c8887fc7d3e22b6456d5.87b9049651aaec8731ac.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-389bcf1b677fcdddc6c0.js" async=""></script><script src="/_next/static/_sRFYeniNLI_tQwcwB1Cj/_buildManifest.js" async=""></script><script src="/_next/static/_sRFYeniNLI_tQwcwB1Cj/_ssgManifest.js" async=""></script><script src="https://hm.baidu.com/hm.js?984a14f3e0e615ff993c5631e3c3e660"></script></body></html>